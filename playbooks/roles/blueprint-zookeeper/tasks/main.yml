--- 
- name: set HDFS blueprint path
  set_fact:
    blueprint_conf: "{{ role_path }}/templates/zookeeper-blueprint.j2"
    
# Extra variables not generated by Jumbo
# Lighten the blueprint for more readability
#
# - name: set variable used in hdfs-blueprint.j2
#   set_fact:
#     metrics:
#       foo: "bar"

- name: Build variables for template
  set_fact:
    ZOOKEEPER:
      quorum: "{{ serv_comp_host['ZOOKEEPER']['ZOOKEEPER_SERVER'] | map('regex_replace', '^(.*)$', '\\1.' + domain + ':2181') | list }}"
      quorum_no_port: "{{ serv_comp_host['ZOOKEEPER']['ZOOKEEPER_SERVER'] | map('regex_replace', '^(.*)$', '\\1.' + domain) | list }}"


- name: Registering service ZOOKEEPER
  debug:
    msg: "Added {{ blueprint_conf }}"
  changed_when: true
  notify: "add service to blueprint"

- meta: flush_handlers
